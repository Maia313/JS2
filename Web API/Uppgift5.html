<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>All vehicles</title>

</head>

<body>
    <h3 id="dataFromCall">


    </h3>

    <script type="text/javascript">
        startFetch();

        async function startFetch() {
            let url = 'https://swapi.co/api/vehicles/';

            while (url != null) {
                url = await responseHandler(url);
            }

        }

        async function responseHandler(url) {
            var response = await fetchData(url);
            let allVehicles = JSON.parse(response);

            var myList = document.createElement('ul');
            var text;

            for (let vehicle of allVehicles.results) {
                let listRow = document.createElement('li');
                text = document.createTextNode(vehicle.name +
                    " " + vehicle.model + " " + vehicle.passengers + " " + vehicle.length);

                listRow.appendChild(text);
                myList.appendChild(listRow);
            }

            document.getElementById("dataFromCall").appendChild(myList);

            return allVehicles.next;
        }
    </script>
    <script src="Web_api.js"></script>

</body>

</html>