<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Film with planet names</title>

</head>

<body>
    <div id="dataFromCall">


    </div>

    <script type="text/javascript">
        responseHandler();


        async function responseHandler() {

            //Hämtar filmen
            let response = await fetchData('https://swapi.co/api/films/1/');
            let currentFilm = JSON.parse(response);

            let myHeader = document.createElement('h3');
            var text = document.createTextNode(currentFilm.title + " " + currentFilm.director + " " + currentFilm.release_date);
            myHeader.appendChild(text);
            document.getElementById("dataFromCall").appendChild(myHeader);


            var myList = document.createElement('ul');

            //Går igenom alla urler till planeter i filmen och anropar apit för att få namnen
            for (let planetUrl of currentFilm.planets) {
                let planetResponse = await fetchData(planetUrl);
                let currentPlanet = JSON.parse(planetResponse);

                let listRow = document.createElement('li');
                text = document.createTextNode(currentPlanet.name);

                listRow.appendChild(text);
                myList.appendChild(listRow);
            }

            document.getElementById("dataFromCall").appendChild(myList);

        }
    </script>

    <script src="Web_api.js"></script>
</body>

</html>