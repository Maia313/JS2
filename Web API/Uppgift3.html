<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>All films</title>
    <script src="Web_api.js"></script>
</head>

<body>
    <h3 id="dataFromCall">


    </h3>

    <script type="text/javascript">
        responseHandler();

        async function responseHandler() {
            var response = await fetchData('https://swapi.co/api/films/');
            let allFilms = JSON.parse(response);

            //Skapar en lista
            var myList = document.createElement('ul');
            var text;

            //Går igenom alla filmer i sökresultatet och skapar en listrad per film
            for (let film of allFilms.results) {
                let listRow = document.createElement('li');

                //Skapar texten som skall stå på raden
                text = document.createTextNode(film.title +
                    " " + film.director + " " + film.release_date);

                listRow.appendChild(text);
                myList.appendChild(listRow);
            }

            //Lägger hela listan i diven
            document.getElementById("dataFromCall").appendChild(myList);
        }
    </script>


</body>

</html>